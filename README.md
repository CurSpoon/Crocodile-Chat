# 鳄鱼聊天室 (Crocodile Chat)

## 项目简介

**鳄鱼聊天室**是一个简单有趣的在线聊天客户端。通过这个聊天室，用户可以畅所欲言，与其他鳄鱼爱好者实时互动！该应用采用了基础的 HTML、CSS 和 JavaScript 技术，具有用户登录、消息发送与接收、聊天记录滚动加载等功能。还支持管理员权限操作，允许删除所有聊天记录。

## 功能特性

1. **实时聊天功能**：用户可以输入消息并立即发送给其他参与聊天的用户，聊天记录会不断更新。
2. **用户身份管理**：每个用户首次访问时输入用户名，并保存在浏览器中，下次访问时自动恢复身份。
3. **消息滚动加载**：聊天记录会根据页面滚动情况自动加载，方便查看历史消息。
4. **自适应布局**：针对桌面、平板和手机等不同设备，提供了优化的响应式布局。
5. **管理员权限**：允许管理员通过密码验证，删除所有聊天记录。

## 技术栈

- **HTML**：用于页面的基本结构搭建。
- **CSS**：用于样式美化、布局控制以及设备响应式设计。
- **JavaScript**：实现消息发送、接收、滚动加载和管理员功能等核心功能。

## 代码解析

### 样式设计（CSS）

- **主体布局**：采用 `flex` 布局实现聊天界面的简洁和灵活性。
  - `#chat-container`：整个聊天框架容器，负责管理消息显示和输入区域。
  - `#chat-box`：显示聊天记录，根据不同用户角色显示不同颜色的消息背景。
  - `#input-container`：输入消息的区域，包含发送和删除功能按钮。
  
- **响应式设计**：
  - 针对平板和手机等小屏幕设备，使用 `@media` 查询对布局进行调整，提供了良好的用户体验。

### JavaScript 功能实现

1. **用户名管理**：每个用户的用户名使用浏览器的 `localStorage` 进行持久化存储，用户首次进入页面时输入用户名，之后自动加载。

2. **发送消息**：
   - 用户在输入框中输入消息，点击发送按钮或按下 `Enter` 键即可将消息发送到服务器。
   - 发送成功后，消息框自动更新，聊天窗口滚动到底部。

3. **接收和显示消息**：
   - 使用 `fetch` 请求从服务器获取消息列表，分页加载，自动显示在聊天窗口中。
   - 滚动到页面顶部时会加载更多历史消息。

4. **消息颜色分配**：
   - 通过映射不同的颜色背景区分不同用户的消息，增强视觉辨识度。

5. **管理员功能**：
   - 通过密码验证后，管理员可以删除所有聊天记录。

6. **自动滚动到最新消息**：
   - 每当新消息发送或接收后，聊天窗口会自动滚动到最底部，保持用户查看最新消息。

### 主要函数

- `getColorForUsername(username)`：根据用户名分配一个唯一的颜色。
- `scrollToBottom()`：将聊天框滚动到最新消息位置。
- `getMessages(page)`：从服务器获取指定页码的消息列表。
- `sendMessage()`：向服务器发送消息并更新聊天窗口。
- `deleteAllMessages()`：通过管理员验证后删除所有消息记录。

### API 说明

- `GET /?page={page}`：获取指定页码的聊天记录。
- `POST /`：发送消息，提交 `username` 和 `message` 信息。
- `DELETE /delete`：删除所有消息记录，需要管理员密码进行身份验证。

## 使用说明

1. 克隆代码仓库：
   ```bash
   git clone https://github.com/your-repository/crocodile-chat.git
   ```

2. 配置 API 地址：
   在 `index.html` 文件中，将 `API_URL` 替换为你的后端服务的真实 API 地址。

3. 运行项目：
   打开 `index.html` 文件，即可在浏览器中启动鳄鱼聊天室。

## 未来改进方向

- 支持自定义用户头像
- 增加表情符号、文件发送等功能
- 支持私聊和分组聊天
- 提供消息加密传输功能

## 许可证

本项目采用 MIT 许可证，欢迎自由使用和修改。

--- 

欢迎加入鳄鱼聊天室！与全世界的鳄鱼爱好者实时互动！
